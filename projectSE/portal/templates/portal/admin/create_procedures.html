{% extends 'base.html' %} {% block content %}

<div class="card border-left-primary">
    <div class="card-header">
        <h5>Caricamento Nuove Procedure di Manutenzione</h5>
    </div>
    <div class="card-body">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %} {{ order }} <br>
            <input class="btn btn-primary" type="file" name="file"><br>

            <button class='btn btn-primary btn-sm mt-3' type="submit" style="float: left">Carica</button>
        </form>
    </div>
    <div class="card-body">
        {% if new_procedures %}
        <form action="{% url 'systemadministrator_home' %}">
            {% csrf_token %}
            <div class="card shadow mb-4">
                <div class="card-header">
                    <h5 class="font-weight-normal text-primary">Lista nuove Procedure di Manutenzione</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped" id="" width="100%" cellspacing="0">
                            <thead>
                                <th><input type="checkbox" onClick="toggle(this)" checked /></th>
                                <th>Procedura</th>
                                <th>Descrizione</th>
                                </tr>
                            </thead>
                            <tbody>

                                {% for p in new_procedures %}
                                <tr>
                                    <td><input type="checkbox" name="user" id={{p.pk}} value={{p.pk}} checked></td>
                                    <td>{{p.procedureName}}</td>
                                    <td>{{p.procedureDescription}}</td>
                                </tr>
                                {% endfor %}

                            </tbody>
                        </table>
                        <button class='btn btn-primary btn-sm mt-3' type="submit" style="float: right">Salva
                                    </button>
                    </div>
                </div>
            </div>
        </form>

        {% endif %}
    </div>
</div>

<script>
    function toggle(source) {
        checkboxes = document.getElementsByName('user');
        for (var i = 0, n = checkboxes.length; i < n; i++) {
            checkboxes[i].checked = source.checked;
        }
    }
</script>

{% endblock %}
